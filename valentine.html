<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vuoi essere il mio Valentino? üíù</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: #EDAFC2;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        
        /* Cuori che cadono */
        .heart-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .falling-heart {
            position: absolute;
            font-size: 25px;
            top: -50px;
        }
        
        @keyframes fallAndFade {
            0% {
                top: -50px;
                opacity: 0.7;
            }
            80% {
                opacity: 0.7;
            }
            100% {
                top: 110vh;
                opacity: 0;
            }
        }
        
        /* Contenitore principale */
        .container {
            text-align: center;
            position: relative;
            z-index: 100;
        }
        
        /* Box immagine bianco */
        .image-box {
            width: 300px;
            height: 220px;
            background: white;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: imagePulse 1.5s ease-in-out infinite;
        }
        
        .image-box img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        /* Cuore rosso nell'angolo in alto a sinistra */
        .corner-heart {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 20px;
            animation: heartPulse 1.5s ease-in-out infinite;
        }
        
        @keyframes imagePulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.03);
            }
        }
        
        @keyframes heartPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }
        
        /* Testo */
        .title {
            font-size: 36px;
            font-weight: bold;
            color: #C946D1;
            margin-bottom: 25px;
            animation: textPulse 1.5s ease-in-out infinite;
        }
        
        @keyframes textPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        /* Bottoni */
.buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center; /* Aggiunto per centrare verticalmente */
            position: relative;
            /* height: 50px;  <-- RIMOSSO: causava il problema */
            min-height: 50px; /* Aggiunto: altezza minima ma pu√≤ crescere */
            flex-wrap: wrap;  /* Aggiunto: permette ai bottoni di andare a capo */
            padding: 10px;    /* Aggiunto: un po' di spazio extra */
            width: 100%;      /* Aggiunto: assicura che usi tutto lo spazio */
        }
.btn {
    padding: 12px 24px;
    border: none;
    border-radius: 25px;
    font-size: clamp(14px, 2.5vw, 18px); /* font responsive */
    font-weight: bold;
    cursor: pointer;
    animation: buttonPulse 1.5s ease-in-out infinite;

    white-space: normal;
    word-break: break-word;
    text-align: center;

    max-width: min(90vw, 320px); /* limite massimo intelligente */
    min-width: 100px;

    flex: 1 1 auto; /* permette di adattarsi */
}


        /* AGGIUNTA: Regole specifiche per cellulari */
        @media (max-width: 600px) {
            .buttons {
                flex-direction: column; /* Mette i bottoni uno sotto l'altro sui cellulari */
                gap: 20px;
            }
            
            .btn {
                width: 80%; /* I bottoni prendono quasi tutta la larghezza */
                padding: 15px 20px;
            }
        }
        
        .btn-yes {
            background: #FF5978;
            color: white;
            box-shadow: 0 0 20px rgba(255, 89, 120, 0.6),
                        0 0 40px rgba(255, 89, 120, 0.4);
            transition: all 0.3s ease;
        }
        
        .btn-no {
            background: #E8F5E9;
            color: #666;
            box-shadow: 0 0 15px rgba(232, 245, 233, 0.6),
                        0 0 30px rgba(232, 245, 233, 0.4);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .btn-yes.escaping,
        .btn-no.escaping {
            position: fixed;
            z-index: 100;
        }
        
        @keyframes buttonPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        .btn-yes:hover {
            transform: scale(1.1);
            animation: none;
            box-shadow: 0 0 30px rgba(255, 89, 120, 0.8),
                        0 0 50px rgba(255, 89, 120, 0.6);
        }
    </style>
</head>
<body>
    <!-- Cuori che cadono -->
    <div class="heart-container" id="heartContainer"></div>
    
    <div class="container">
        <div class="image-box">
            <img id="mainImage" src="" alt="Valentine">
        </div>
        
        <div class="title">Vuoi essere il mio Valentino? üíù</div>
        
        <div class="buttons">
            <button class="btn btn-yes">S√¨</button>
            <button class="btn btn-no" id="noBtn">No</button>
        </div>
    </div>

    <script>
        // ========== CONFIGURAZIONE SCHERMATE ==========
        const CONFIG = {
            screens: [
                                {
                    imageUrl: 'https://i.pinimg.com/originals/bd/ee/24/bdee248e53d027102223f17e4c025854.gif',
                    text: 'Ciao amorino...', // Testo della domanda
                    yesText: 'Ciao vita, dimmi', // Testo bottone SI
                    noText:  null, // Testo bottone NO
                    yesEscapes: false, // Il bottone SI scappa? (true/false)
                    noEscapes: true, // Il bottone NO scappa? (true/false)
                    yesUrl: null, // URL dove andare cliccando SI (null = schermata successiva)
                    noUrl: null // URL dove andare cliccando NO (null = schermata successiva)
                },
                {
                    imageUrl: 'https://media0.giphy.com/media/1JmGiBtqTuehfYxuy9/giphy.gif',
                    text: 'Vuoi essere la mia Valentina? üíù', // Testo della domanda
                    yesText: 'S√¨', // Testo bottone SI
                    noText: 'No', // Testo bottone NO
                    yesEscapes: false, // Il bottone SI scappa? (true/false)
                    noEscapes: true, // Il bottone NO scappa? (true/false)
                    yesUrl: null, // URL dove andare cliccando SI (null = schermata successiva)
                    noUrl: null // URL dove andare cliccando NO (null = schermata successiva)
                },
                {
                    imageUrl: 'https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExdzlqbm9pZ3kyc3ZlcXQzZ2wyaDBzZDliajZ1cGk3NG81b3g1OHQ1bCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/KmxmoHUGPDjfQXqGgv/giphy.gif',
                    text: 'Sei sicura piccolina mia? ü•∫',
                    yesText: 'S√¨! Sono sicurissima',
                    noText: 'No, in realt√† no...',
                    yesEscapes: false,
                    noEscapes: true,
                    yesUrl: null,
                    noUrl: null
                },
                {
                    imageUrl: 'https://media1.tenor.com/m/Gj7mlQDKYqAAAAAC/white-cat-grey-cat.gif',
                    text: 'Ti amo tantissimo amore mio! \nSono entusiasta di passare questo San Valentino insieme. ‚ù§Ô∏è‚ú®',
                    yesText: null,
                    noText: null, // null = non mostrare questo bottone
                    yesEscapes: false,
                    noEscapes: false,
                    yesUrl: null, // Esempio di URL esterno
                    noUrl: null
                }
            ],
            numberOfHearts: 20 // Numero di cuori che cadono
        };
        // =============================================
        
        let currentScreen = 0;
        
        // Imposta l'immagine
        const mainImage = document.getElementById('mainImage');
        const titleElement = document.querySelector('.title');
        const yesBtn = document.querySelector('.btn-yes');
        const noBtn = document.querySelector('.btn-no');
        const imageBox = document.querySelector('.image-box');
        
        let isYesEscaping = false;
        let isNoEscaping = false;
        
        // Carica una schermata
        function loadScreen(screenIndex) {
            if (screenIndex >= CONFIG.screens.length) {
                screenIndex = CONFIG.screens.length - 1;
            }
            
            const screen = CONFIG.screens[screenIndex];
            currentScreen = screenIndex;
            
            // Aggiorna contenuti
            mainImage.src = screen.imageUrl;
            titleElement.textContent = screen.text;
            
            // Aggiorna bottone SI
            yesBtn.textContent = screen.yesText;
            yesBtn.style.display = screen.yesText ? 'block' : 'none';
            
            // Aggiorna bottone NO
            if (screen.noText) {
                noBtn.textContent = screen.noText;
                noBtn.style.display = 'block';
            } else {
                noBtn.style.display = 'none';
            }
            
            // Reset posizioni
            isYesEscaping = false;
            isNoEscaping = false;
            yesBtn.classList.remove('escaping');
            noBtn.classList.remove('escaping');
            yesBtn.style.left = '';
            yesBtn.style.top = '';
            noBtn.style.left = '';
            noBtn.style.top = '';
        }
        
        // Array di emoji cuori alternati
        const hearts = ['‚ù§Ô∏è', 'üíï'];
        let heartIndex = 0;
        
        // Genera cuori che cadono con dissolvenza
        function createFallingHeart() {
            const heart = document.createElement('div');
            heart.className = 'falling-heart';
            heart.innerHTML = hearts[heartIndex];
            heartIndex = (heartIndex + 1) % hearts.length;
            
            heart.style.left = Math.random() * 100 + 'vw';
            const duration = Math.random() * 3 + 4;
            heart.style.animation = `fallAndFade ${duration}s linear`;
            
            document.getElementById('heartContainer').appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
                createFallingHeart();
            }, duration * 1000);
        }
        
        // Inizializza cuori
        for (let i = 0; i < CONFIG.numberOfHearts; i++) {
            setTimeout(() => createFallingHeart(), i * 300);
        }
        
        // Distanza minima dal mouse per attivare la fuga
        const ESCAPE_DISTANCE = 150;
        
        // Funzione per verificare se una posizione si sovrappone all'immagine
        function isOverlappingImage(x, y, width, height) {
            const imageRect = imageBox.getBoundingClientRect();
            const margin = 20;
            
            return !(x + width < imageRect.left - margin ||
                    x > imageRect.right + margin ||
                    y + height < imageRect.top - margin ||
                    y > imageRect.bottom + margin);
        }
        
        // Funzione per trovare una posizione valida
        function findValidPosition(mouseX, mouseY, btnWidth, btnHeight) {
            let attempts = 0;
            let newX, newY;
            
            do {
                newX = Math.random() * (window.innerWidth - btnWidth - 40) + 20;
                newY = Math.random() * (window.innerHeight - btnHeight - 40) + 20;
                
                const distanceFromMouse = Math.sqrt(
                    Math.pow(mouseX - (newX + btnWidth/2), 2) + 
                    Math.pow(mouseY - (newY + btnHeight/2), 2)
                );
                
                attempts++;
                
                if (distanceFromMouse > ESCAPE_DISTANCE * 1.5 && 
                    !isOverlappingImage(newX, newY, btnWidth, btnHeight)) {
                    break;
                }
            } while (attempts < 30);
            
            return { x: newX, y: newY };
        }
        
        // Gestione movimento mouse
        document.addEventListener('mousemove', (e) => {
            const screen = CONFIG.screens[currentScreen];
            
            // Gestione bottone YES
            if (screen.yesEscapes && screen.yesText) {
                const btnRect = yesBtn.getBoundingClientRect();
                const btnCenterX = btnRect.left + btnRect.width / 2;
                const btnCenterY = btnRect.top + btnRect.height / 2;
                
                const distanceX = e.clientX - btnCenterX;
                const distanceY = e.clientY - btnCenterY;
                const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);
                
                if (distance < ESCAPE_DISTANCE) {
                    if (!isYesEscaping) {
                        isYesEscaping = true;
                        yesBtn.classList.add('escaping');
                        yesBtn.style.left = btnRect.left + 'px';
                        yesBtn.style.top = btnRect.top + 'px';
                    }
                    
                    const newPos = findValidPosition(e.clientX, e.clientY, btnRect.width, btnRect.height);
                    yesBtn.style.left = newPos.x + 'px';
                    yesBtn.style.top = newPos.y + 'px';
                }
            }
            
            // Gestione bottone NO
            if (screen.noEscapes && screen.noText) {
                const btnRect = noBtn.getBoundingClientRect();
                const btnCenterX = btnRect.left + btnRect.width / 2;
                const btnCenterY = btnRect.top + btnRect.height / 2;
                
                const distanceX = e.clientX - btnCenterX;
                const distanceY = e.clientX - btnCenterY;
                const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);
                
                if (distance < ESCAPE_DISTANCE) {
                    if (!isNoEscaping) {
                        isNoEscaping = true;
                        noBtn.classList.add('escaping');
                        noBtn.style.left = btnRect.left + 'px';
                        noBtn.style.top = btnRect.top + 'px';
                    }
                    
                    const newPos = findValidPosition(e.clientX, e.clientY, btnRect.width, btnRect.height);
                    noBtn.style.left = newPos.x + 'px';
                    noBtn.style.top = newPos.y + 'px';
                }
            }
        });
        
        // Click bottone YES
        yesBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const screen = CONFIG.screens[currentScreen];
            
            if (screen.yesEscapes) {
                // Se scappa, teletrasporta
                if (!isYesEscaping) {
                    const btnRect = yesBtn.getBoundingClientRect();
                    isYesEscaping = true;
                    yesBtn.classList.add('escaping');
                    yesBtn.style.left = btnRect.left + 'px';
                    yesBtn.style.top = btnRect.top + 'px';
                }
                
                const newPos = findValidPosition(window.innerWidth / 2, window.innerHeight / 2, yesBtn.offsetWidth, yesBtn.offsetHeight);
                
                yesBtn.style.transform = 'scale(0)';
                setTimeout(() => {
                    yesBtn.style.left = newPos.x + 'px';
                    yesBtn.style.top = newPos.y + 'px';
                    yesBtn.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        yesBtn.style.transform = 'scale(1)';
                    }, 150);
                }, 100);
            } else {
                // Vai alla schermata successiva o URL
                if (screen.yesUrl) {
                    window.location.href = screen.yesUrl;
                } else {
                    loadScreen(currentScreen + 1);
                }
            }
        });
        
        // Click bottone NO
        noBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const screen = CONFIG.screens[currentScreen];
            
            if (screen.noEscapes) {
                // Se scappa, teletrasporta
                if (!isNoEscaping) {
                    const btnRect = noBtn.getBoundingClientRect();
                    isNoEscaping = true;
                    noBtn.classList.add('escaping');
                    noBtn.style.left = btnRect.left + 'px';
                    noBtn.style.top = btnRect.top + 'px';
                }
                
                const newPos = findValidPosition(window.innerWidth / 2, window.innerHeight / 2, noBtn.offsetWidth, noBtn.offsetHeight);
                
                noBtn.style.transform = 'scale(0)';
                setTimeout(() => {
                    noBtn.style.left = newPos.x + 'px';
                    noBtn.style.top = newPos.y + 'px';
                    noBtn.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        noBtn.style.transform = 'scale(1)';
                    }, 150);
                }, 100);
            } else {
                // Vai alla schermata successiva o URL
                if (screen.noUrl) {
                    window.location.href = screen.noUrl;
                } else {
                    loadScreen(currentScreen + 1);
                }
            }
        });
        
        // Carica la prima schermata
        loadScreen(0);
    </script>
</body>
</html>
